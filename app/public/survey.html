<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery.js"></script>
    <title>Friend Finder</title>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-6">
          <div class="card text-center">
            <div class="card-header">Let's Get To Know You</div>
            <div class="card-body">
              Card Body <br /><br />
              <a href="/home"
                ><button type="button" class="btn btn-primary center-block">
                  Home
                </button></a
              >
            </div>
          </div>
          <br />
          <div class="card">
            <div class="card-body">
              <form>
                <div class="form-group">
                  <label for="userName">Email address</label>
                  <input
                    type="text"
                    class="form-control"
                    id="userName"
                    placeholder="You Name Is Here"
                  />
                </div>
                <div class="form-group">
                  <label for="imageURL">Email address</label>
                  <input
                    type="text"
                    class="form-control"
                    id="imageURL"
                    placeholder="Put Your Image URL Here"
                  />
                </div>
                <div class="form-group">
                  <label for="select0">Example select</label>
                  <select class="form-control" id="select0">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select1">Example select</label>
                  <select class="form-control" id="select1">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select2">Example select</label>
                  <select class="form-control" id="select2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select3">Example select</label>
                  <select class="form-control" id="select3">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select4">Example select</label>
                  <select class="form-control" id="select4">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select5">Example select</label>
                  <select class="form-control" id="select5">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select6">Example select</label>
                  <select class="form-control" id="select6">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select7">Example select</label>
                  <select class="form-control" id="select7">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select8">Example select</label>
                  <select class="form-control" id="select8">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="select9">Example select</label>
                  <select class="form-control" id="select9">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                  </select>
                </div>

                <button type="submit" id="submit" class="btn btn-primary">
                  Submit
                </button>
              </form>
            </div>
          </div>
        </div>
        <div class="col-md-3"></div>
      </div>
    </div>
   
    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title font-weight-bold">Best Match</h2>
              <button type="button" class="close" data-dismiss="modal">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <h2 id="match-name"></h2>
              <img id="match-img" style="height: 200px; width: 200px;" src="" alt />
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
  </body>
  <script>
      
    const modal = document.querySelector("#modal");
    const modalLabel = document.querySelector("#modalLabel");
    const closeButton = $("#closeButton");
    
    closeButton.on("click", function(event) {
    modal.style.display = "none";
})

    $("#submit").on("click", function() {
      event.preventDefault();

      var userName = $("#userName").val();
      var userImage = $("#imageURL").val();
      var userScores = [];

      for (var i = 0; i < 10; i++) {
        var scores = $("#select" + i).val();
        // console.log(scores);

        userScores.push(scores);
      }
      console.log(userName, userImage, userScores);

      function empty() {
        $("#userName").val("");
        $("#imageURL").val("");
      }

      $.post("/api/friends", userScores, function(data) {
            $("#match-name").text(data.name);
            $("#match-img").attr("src", data.photo);
            $("#results-modal").modal("toggle");
          });

      empty();
    });
  </script>
</html>
